# Secure Environment Configuration Template
# Copy this file to .env and fill in your actual values
# NEVER commit the actual .env file to version control

# =============================================================================
# ENVIRONMENT SETTINGS
# =============================================================================
ENVIRONMENT=development  # development, staging, production
DEBUG=true
LOG_LEVEL=INFO

# =============================================================================
# REDIS CONFIGURATION (Secure)
# =============================================================================
# Use separate components for better security
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_USERNAME=scraper_user
REDIS_PASSWORD=YourSecureRedisPassword123!@#
REDIS_SSL=false
REDIS_SSL_CERT_REQS=required
REDIS_SSL_CA_CERTS=/path/to/ca-certificates.crt
REDIS_SSL_CERTFILE=/path/to/client.crt
REDIS_SSL_KEYFILE=/path/to/client.key

# Connection settings
REDIS_CONNECTION_TIMEOUT=30
REDIS_SOCKET_TIMEOUT=30
REDIS_SOCKET_KEEPALIVE=true
REDIS_MAX_CONNECTIONS=20
REDIS_RETRY_ON_TIMEOUT=true
REDIS_HEALTH_CHECK_INTERVAL=30

# =============================================================================
# CELERY CONFIGURATION
# =============================================================================
# These will be built from Redis settings above
CELERY_BROKER_URL=redis://${REDIS_USERNAME}:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}
CELERY_RESULT_BACKEND=redis://${REDIS_USERNAME}:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# Celery worker settings
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_TASK_ACKS_LATE=true
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000

# =============================================================================
# DATABASE CONFIGURATION (Secure)
# =============================================================================
# Use separate components instead of full URL
DB_HOST=localhost
DB_PORT=5432
DB_NAME=web_scraper
DB_USER=scraper_user
DB_PASSWORD=YourSecureDBPassword123!@#
DB_SSL_MODE=require
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# =============================================================================
# AI/API CONFIGURATION
# =============================================================================
# Gemini API (Google AI Studio)
GEMINI_API_KEY=AIzaSyYourActualGeminiAPIKey123456789012345678
GEMINI_MODEL=gemini-2.0-flash-exp
GEMINI_MAX_TOKENS=8192
GEMINI_TEMPERATURE=0.1
GEMINI_TIMEOUT=120

# =============================================================================
# SECURITY SETTINGS
# =============================================================================
# Generate with: openssl rand -hex 32
SECRET_KEY=your_64_character_secret_key_generated_with_openssl_rand_hex_32
JWT_SECRET_KEY=your_jwt_secret_key_different_from_main_secret
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# API Security
API_RATE_LIMIT_PER_MINUTE=100
API_RATE_LIMIT_BURST=20
CORS_ORIGINS=http://localhost:3000,http://localhost:8501
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# SCRAPING CONFIGURATION
# =============================================================================
# Generic user agents to prevent fingerprinting
SCRAPER_USER_AGENTS="Mozilla/5.0 (compatible; WebScraper/1.0)|Mozilla/5.0 (compatible; DataCollector/1.0)|Mozilla/5.0 (compatible; ContentExtractor/1.0)"

# Proxy settings (if needed)
PROXY_ENABLED=false
PROXY_HTTP=http://proxy-server:8080
PROXY_HTTPS=https://proxy-server:8080
PROXY_USERNAME=proxy_user
PROXY_PASSWORD=proxy_password

# Rate limiting
DEFAULT_REQUEST_DELAY=1.0
MAX_CONCURRENT_REQUESTS=5
RESPECT_ROBOTS_TXT=true

# =============================================================================
# MONITORING & LOGGING
# =============================================================================
# Structured logging
LOG_FORMAT=json
LOG_FILE=/var/log/web-scraper/app.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5

# Metrics and monitoring
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_DISK_PATH=/var/lib/webscraper  # Linux/Mac: /var/lib/webscraper, Windows: C:\ProgramData\webscraper
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PORT=8080

# =============================================================================
# PRODUCTION SECURITY NOTES
# =============================================================================
# 1. Generate strong passwords (12+ characters, mixed case, numbers, symbols)
# 2. Use SSL/TLS for all external connections in production
# 3. Set REDIS_SSL=true for production Redis connections
# 4. Use separate database credentials for each environment
# 5. Rotate secrets regularly (monthly for production)
# 6. Never use default or example passwords
# 7. Set restrictive file permissions: chmod 600 .env
# 8. Use environment-specific configuration files
# 9. Enable database SSL: DB_SSL_MODE=require
# 10. Use generic user agents to prevent fingerprinting

# =============================================================================
# QUICK SECURITY CHECKLIST
# =============================================================================
# [ ] All passwords are 12+ characters and unique
# [ ] SECRET_KEY is generated with openssl rand -hex 32
# [ ] GEMINI_API_KEY is a real API key (not placeholder)
# [ ] Database credentials are environment-specific
# [ ] SSL/TLS is enabled for production
# [ ] File permissions are set to 600
# [ ] No placeholder values remain
# [ ] All URLs use HTTPS in production
# [ ] Rate limiting is configured appropriately
# [ ] Logging doesn't expose sensitive data